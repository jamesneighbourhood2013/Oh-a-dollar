local player = game:GetService("Players").LocalPlayer
local destination = Vector3.new(-5200.28, 792.62, -3045.08)

-- Create the UI elements (TextBox, Button, TextLabel)
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player.PlayerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 400, 0, 200)
frame.Position = UDim2.new(0.5, -200, 0.5, -100)
frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
frame.Parent = screenGui

frame.Active = true
frame.Draggable = true

local speedLabel = Instance.new("TextLabel")
speedLabel.Size = UDim2.new(1, 0, 0, 30)
speedLabel.Position = UDim2.new(0, 0, 0, 10)
speedLabel.Text = "Enter Teleport Speed (200 - 500)"
speedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
speedLabel.TextSize = 18
speedLabel.BackgroundTransparency = 1
speedLabel.Parent = frame

-- TextBox to input speed value
local speedInput = Instance.new("TextBox")
speedInput.Size = UDim2.new(1, -50, 0, 40)
speedInput.Position = UDim2.new(0, 25, 0, 50)
speedInput.Text = "200"
speedInput.TextColor3 = Color3.fromRGB(255, 255, 255)
speedInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
speedInput.TextSize = 20
speedInput.ClearTextOnFocus = true
speedInput.Parent = frame

-- Create teleport button
local teleportButton = Instance.new("TextButton")
teleportButton.Size = UDim2.new(1, 0, 0, 40)
teleportButton.Position = UDim2.new(0, 0, 0, 120)
teleportButton.Text = "Teleport"
teleportButton.TextColor3 = Color3.fromRGB(255, 255, 255)
teleportButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
teleportButton.TextSize = 20
teleportButton.Parent = frame

-- Teleport and Noclip functions
local hasTeleported = false

local function enableNoclip(character)
    for _, part in ipairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = false
        end
    end
end

local function enableFlight(character)
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    if not hrp:FindFirstChild("FlightVelocity") then
        local bv = Instance.new("BodyVelocity")
        bv.Name = "FlightVelocity"
        bv.Velocity = Vector3.new(0, 0, 0)
        bv.MaxForce = Vector3.new(1e5, 1e5, 1e5)
        bv.P = 1e5
        bv.Parent = hrp
    end
end

local function cleanupFlight(character)
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if hrp then
        local bv = hrp:FindFirstChild("FlightVelocity")
        if bv then bv:Destroy() end
    end
end

local function disableNoclip(character)
    for _, part in ipairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = true
        end
    end
end

local function moveToDestination(hrp, speed)
    local runService = game:GetService("RunService")
    local character = hrp.Parent
    local connection

    connection = runService.RenderStepped:Connect(function(dt)
        if hasTeleported then
            connection:Disconnect()
            return
        end

        enableNoclip(character)
        enableFlight(character)

        local direction = destination - hrp.Position
        local distance = direction.Magnitude

        if distance <= 1 then
            hrp.CFrame = CFrame.new(destination)
            hasTeleported = true
            connection:Disconnect()

            task.delay(3, function()
                cleanupFlight(character)
                disableNoclip(character)

                local scriptInstance = script
                if scriptInstance and scriptInstance:IsDescendantOf(game) then
                    scriptInstance:Destroy()
                end
            end)

            return
        end

        local step = math.min(speed * dt, distance)
        hrp.CFrame = hrp.CFrame + direction.Unit * step
    end)
end

local function startTeleport(speed)
    if hasTeleported then return end

    local character = player.Character or player.CharacterAdded:Wait()
    local hrp = character:WaitForChild("HumanoidRootPart")
    moveToDestination(hrp, speed)
end

speedInput.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        local speed = tonumber(speedInput.Text)
        if speed and speed >= 200 and speed <= 500 then
            startTeleport(speed)
            screenGui:Destroy()
        else
            warn("Please enter a speed between 200 and 500.")
        end
    end
end)

teleportButton.MouseButton1Click:Connect(function()
    local speed = tonumber(speedInput.Text)
    if speed and speed >= 200 and speed <= 500 then
        startTeleport(speed)
        screenGui:Destroy()
    else
        warn("Please enter a speed between 200 and 500.")
    end
end)
